<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE Map [
<!ENTITY % entities SYSTEM "entities.xml.inc">
%entities;
]>
<!--
version 2018 - Yves Cainaud
-->
<Map xmlns:xi="http://www.w3.org/2001/XInclude"
srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs +over"
background-color="transparent"
font-directory="..\fonts-carto\" >

	&fontset-settings;
        
    <Style name="osm" opacity="0.6">
        <Rule>
            &maxscale_zoom0;
            &minscale_zoom8;
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
             stroke="#0029BB" stroke-width="3" stroke-opacity="1" />
        </Rule>
        <Rule>
            &maxscale_zoom9;
            &minscale_zoom12;
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#0029BB" stroke-width="7" stroke-opacity="1" />
        </Rule>
        <Rule>
            &maxscale_zoom13;
            &minscale_zoom18;
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#0029BB" stroke-width="10" stroke-opacity="1" />
        </Rule>	

    </Style>
           
    <Style name="enj-bg"  opacity="0.4">
        
        <Rule>
            &maxscale_zoom0;
            &minscale_zoom8;
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#565656" stroke-width="3" stroke-opacity="1" />
        </Rule>
        <Rule>
            &maxscale_zoom9;
            &minscale_zoom12;
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#565656" stroke-width="7" stroke-opacity="1" />
        </Rule>
        <Rule>
            &maxscale_zoom13;
            &minscale_zoom18;
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#565656" stroke-width="10" stroke-opacity="1" />
        </Rule>	
    </Style>
    <Style name="enj">
        <Rule>
            &maxscale_zoom3;
            &minscale_zoom8;
            <Filter>[distance]&gt;250 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#FF0000" stroke-width="1" stroke-opacity="0.7" />
        </Rule>
        <Rule>
            &maxscale_zoom9;
            &minscale_zoom12;
            <Filter>[distance]&gt;250 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#FF0000" stroke-width="1.5" stroke-opacity="0.7" />
        </Rule>
        <Rule>
            &maxscale_zoom13;
            &minscale_zoom18;
            <Filter>[distance]&gt;250 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#FF0000" stroke-width="2" stroke-opacity="0.7" />
        </Rule>	

        <Rule>
            &maxscale_zoom3;
            &minscale_zoom8;
            <Filter>[distance]&lt;250 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#FFA000" stroke-width="1" stroke-opacity="0.7" />
        </Rule>
        <Rule>
            &maxscale_zoom9;
            &minscale_zoom12;
            <Filter>[distance]&lt;250 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#FF5100" stroke-width="1.5" stroke-opacity="0.7" />
        </Rule>
        <Rule>
            &maxscale_zoom13;
            &minscale_zoom18;
            <Filter>[distance]&lt;250 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#FF5100" stroke-width="2" stroke-opacity="0.7" />
        </Rule>	

        <Rule>
            &maxscale_zoom3;
            &minscale_zoom8;
            <Filter>[distance]&lt;100 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#FF5100" stroke-width="1" stroke-opacity="0.7" />
        </Rule>
        <Rule>
            &maxscale_zoom9;
            &minscale_zoom12;
            <Filter>[distance]&lt;100 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#FFDF00" stroke-width="1.5" stroke-opacity="0.7" />
        </Rule>
        <Rule>
            &maxscale_zoom13;
            &minscale_zoom18;
            <Filter>[distance]&lt;100 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#FFDF00" stroke-width="2" stroke-opacity="0.7" />
        </Rule>	

        <Rule>
            &maxscale_zoom3;
            &minscale_zoom8;
            <Filter>[distance]&lt;50 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#94FF00" stroke-width="1" stroke-opacity="0.7" />
        </Rule>
        <Rule>
            &maxscale_zoom9;
            &minscale_zoom12;
            <Filter>[distance]&lt;50 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#94FF00" stroke-width="1.5" stroke-opacity="0.7" />
        </Rule>
        <Rule>
            &maxscale_zoom13;
            &minscale_zoom18;
            <Filter>[distance]&lt;50 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#94FF00" stroke-width="2" stroke-opacity="0.7" />
        </Rule>	

        <Rule>
            &maxscale_zoom3;
            &minscale_zoom8;
            <Filter>[distance]&lt;20 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#5EFF00" stroke-width="1" stroke-opacity="0.7" />
        </Rule>
        <Rule>
            &maxscale_zoom9;
            &minscale_zoom12;
            <Filter>[distance]&lt;20 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#5EFF00" stroke-width="1.5" stroke-opacity="0.7" />
        </Rule>
        <Rule>
            &maxscale_zoom13;
            &minscale_zoom18;
            <Filter>[distance]&lt;20 </Filter>
            <LineSymbolizer stroke-linejoin="round" stroke-linecap="round"
           stroke="#5EFF00" stroke-width="2" stroke-opacity="0.7" />
        </Rule>	
    </Style>
    

<Layer name="osm"
			srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs +over">
	<StyleName>osm</StyleName>
	<Datasource>
		&datasource-settings;
		<Parameter name="geometry_table">planet_osm_line</Parameter>
		<Parameter name="table">
		(select way from planet_osm_line where "piste:type"='nordic' ) as piste
		</Parameter>
	</Datasource>
</Layer>
<Layer name="enj-bg"
			srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs +over">
	<StyleName>enj-bg</StyleName>
	<Datasource>
		&datasource-settings;
		<Parameter name="geometry_table">enj_nordic_segs</Parameter>
		<Parameter name="table">
		(select wkb_geometry, distance from enj_nordic_segs ) as segments
		</Parameter>
	</Datasource>
</Layer>
<Layer name="enj"
			srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs +over">
	<StyleName>enj</StyleName>
	<Datasource>
		&datasource-settings;
		<Parameter name="geometry_table">enj_nordic_segs</Parameter>
		<Parameter name="table">
		(select wkb_geometry, distance from enj_nordic_segs ) as segments
		</Parameter>
	</Datasource>
</Layer>

</Map>
